(function(){var j=null,k=!1;
KolorFloorPlan=function(p,o){function B(a){ktools.DOM.stopEventPropagation(a);l.find(".kolorAreaContent").click()}function C(){kolorBrowserDetect.isAtLeastIEX(11)&&document.msFullscreenElement!=j?(jQuery("#"+p+" .floorplanContent").height(jQuery("#"+o).parent().get(0).clientHeight),jQuery("#"+p+" .floorplanContent").width(jQuery("#"+o).parent().get(0).clientWidth)):(jQuery("#"+p+" .floorplanContent").height(jQuery("#"+o).parent().height()),jQuery("#"+p+" .floorplanContent").width(jQuery("#"+o).parent().width()));
if(c.display_title||"multiple"==c.fp_selector)l.find(".kolorAreaTitle .floorplanSwapBox").css("width",l.find(".kolorAreaTitle").width()+"px"),""!=q&&l.find(".kolorAreaTitle .floorplanSwapBox").css("-webkit-transform","translate3d(0px, 0px, 0px)");var a=jQuery("#"+p+" .floorplanContent").width(),d=jQuery("#"+p+" .floorplanContent").height();if(c.resize){var b=1;jQuery("#"+p+" .floorplanItem").each(function(){var f=jQuery(this).find(">img").attr("width"),e=jQuery(this).find(">img").attr("height"),f=
D(a,d,f,e);jQuery(this).find(">img").css("width",f.width);jQuery(this).find(">img").css("height",f.height);b=f.scale;if(c.position.indexOf("bottom")>-1)jQuery(this).css("bottom","0");else if(c.position.indexOf("top")>-1)jQuery(this).css("top","0");else{e=jQuery(".floorplanContent").height()/2-f.height/2;jQuery(this).css("top",e+"px")}if(c.position.indexOf("left")>-1)jQuery(this).css("left","0");else if(c.position.indexOf("right")>-1)jQuery(this).css("right","0");else{f=jQuery(".floorplanContent").width()/
2-f.width/2;jQuery(this).css("left",f+"px")}for(var g in i[jQuery(this).data("floorplanName")]){jQuery(this).css("display")=="none"&&jQuery(this).css({visibility:"hidden",display:"block"});var f=jQuery("#"+g).data("spotInitTop"),e=jQuery("#"+g).data("spotInitLeft"),h=jQuery("#"+g).data("spotInitTopMargin"),m=jQuery("#"+g).data("spotInitLeftMargin");jQuery(this).css("visibility")=="hidden"&&jQuery(this).css({visibility:"visible",display:"none"});if(f!=0&&e!=0){jQuery("#"+g).css("top",f*b-h+"px");jQuery("#"+
g).css("left",e*b-m+"px");jQuery("#"+g+"_radar").css("top",f*b-n.radius+"px");jQuery("#"+g+"_radar").css("left",e*b-n.radius+"px")}}})}else jQuery("#"+p+" .floorplanItem").each(function(){var b=jQuery(this).find(">img").height(),c=jQuery(this).find(">img").width(),b=d-b,c=a-c;if(b<0||c<0){(jQuery(this).data("ui-draggable")||jQuery(this).data("uiDraggable")||jQuery(this).data("draggable"))&&jQuery(this).draggable("option","disabled",k);jQuery(this).css("cursor","move");jQuery(this).data("containerLeft",
c);jQuery(this).data("containerTop",b);jQuery(this).position().left<c&&(c>0?jQuery(this).css("left","0px"):jQuery(this).css("left",c+"px"));jQuery(this).position().top<b&&(b>0?jQuery(this).css("top","0px"):jQuery(this).css("top",b+"px"))}else{(jQuery(this).data("ui-draggable")||jQuery(this).data("uiDraggable")||jQuery(this).data("draggable"))&&jQuery(this).draggable("option","disabled",true);jQuery(this).css("cursor","auto")}})}function J(a,c){var b=document.getElementById(a);b.addEventListener?ktools.Device.isTouch()?
b.addEventListener("touchstart",function(a){ktools.DOM.stopEventPropagation(a);r.call(c)},k):b.addEventListener("click",function(a){ktools.DOM.stopEventPropagation(a);r.call(c)},k):b.attachEvent("onclick",function(a){ktools.DOM.stopEventPropagation(a);r.call(c)})}function E(a,c,b){var f=document.getElementById("canvas_radar_"+a);f!==j&&(a=f.getContext("2d"),b==j&&(b=90),a.clearRect(0,0,f.width,f.height),a.strokeStyle=n.color,a.lineWidth=n.width,a.fillStyle=n.fillColor,a.save(),a.translate(f.width/
2,f.height/2),a.rotate((c-b/2+-90)*(Math.PI/180)),c=n.radius-n.width,a.beginPath(),a.globalAlpha=n.opacity,a.moveTo(0,0),a.lineTo(c,0),a.arc(0,0,c,0*(Math.PI/180),b*(Math.PI/180),k),a.lineTo(0,0),a.stroke(),a.globalAlpha=n.fillOpacity,a.fill(),a.closePath(),a.restore())}function D(a,c,b,f){var e={scale:1};!(b>a||f>c)===k&&(e.scale=Math.min(a/b,c/f));e.width=parseInt(b*e.scale);e.height=parseInt(f*e.scale);return e}function K(a,d,b,f){var e='<div class="floorplanItem '+a+'" style="position:absolute;',
e=m!=j&&""!=m&&m==a?e+'">':e+'display: none;">',e=e+('<img class="'+a+'" src="'+d+'" width="'+b+'" height="'+f+'"');c.resize&&(e+=' style="pointer-events:none;"');e+=" disabled /></div>";c.display_orientation&&(e+='<div class="floorplanCompass '+a+'"><canvas height="50" width="50" id="canvas_compass_'+a+'"><\!-- Your browser does not support the HTML 5 Canvas. --\></canvas></div>');kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(e=toStaticHTML(e));g.find(".floorplanContent").append(e);var e=
jQuery("#"+o).parent().width(),h=jQuery("#"+o).parent().height(),d=1;jQuery(".floorplanItem."+a).data("floorplanName",a);c.close_on_click&&g.find(".floorplanContent .floorplanItem."+a+" img."+a).unbind("click").bind("click",B);if(c.resize)d=D(e,h,b,f),g.find(".floorplanItem."+a+" img").css("width",d.width),g.find(".floorplanItem."+a+" img").css("height",d.height),-1<c.position.indexOf("bottom")?g.find(".floorplanItem."+a).css("bottom","0"):-1<c.position.indexOf("top")?g.find(".floorplanItem."+a).css("top",
"0"):(f=jQuery(".floorplanContent").height()/2-d.height/2,g.find(".floorplanItem."+a).css("top",f+"px")),-1<c.position.indexOf("left")?g.find(".floorplanItem."+a).css("left","0"):-1<c.position.indexOf("right")?g.find(".floorplanItem."+a).css("right","0"):(b=jQuery(".floorplanContent").width()/2-d.width/2,g.find(".floorplanItem."+a).css("left",b+"px")),d=d.scale;else{var e=jQuery(".floorplanContent").height(),i=jQuery(".floorplanItem."+a+">img").height(),h=jQuery(".floorplanContent").width(),n=jQuery(".floorplanItem."+
a+">img").width(),e=e-i,h=h-n;-1<c.position.indexOf("bottom")?g.find(".floorplanItem."+a).css("bottom","0"):-1<c.position.indexOf("top")?g.find(".floorplanItem."+a).css("top","0"):(f=jQuery(".floorplanContent").height()/2-f/2,f=0,g.find(".floorplanItem."+a).css("top",f+"px"));-1<c.position.indexOf("left")?g.find(".floorplanItem."+a).css("left","0"):-1<c.position.indexOf("right")?g.find(".floorplanItem."+a).css("right","0"):(b=jQuery(".floorplanContent").width()/2-b/2,b=0,g.find(".floorplanItem."+
a).css("left",b+"px"));0>e||0>h?(jQuery(".floorplanItem."+a).data("containerLeft",h),jQuery(".floorplanItem."+a).data("containerTop",e),jQuery(".floorplanItem."+a).css("cursor","move"),jQuery(".floorplanItem."+a).draggable({disabled:k,distance:15,scroll:k,start:function(){c.close_on_click&&g.find(".floorplanContent .floorplanItem."+a+" img."+a).unbind("click")},drag:function(a,b){if(b.position.top>=0)b.position.top=0;else if(b.position.top<=jQuery(this).data("containerTop"))b.position.top=jQuery(this).data("containerTop")>
0?0:jQuery(this).data("containerTop");if(b.position.left>=0)b.position.left=0;else if(b.position.left<=jQuery(this).data("containerLeft"))b.position.left=jQuery(this).data("containerLeft")>0?0:jQuery(this).data("containerLeft")},stop:function(){c.close_on_click&&setTimeout(function(){g.find(".floorplanContent .floorplanItem."+a+" img."+a).bind("click",B)},100)}})):(jQuery(".floorplanItem."+a).data("containerLeft",0),jQuery(".floorplanItem."+a).data("containerTop",0))}return d}function L(a,d){var b;
b='<div class="floorplanDropDownItemDiv '+a+('">'+(c.use_i18n?ktools.I18N.getInstance().getMessage(d):d)+"</div>");kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(b=toStaticHTML(b));l.find(".kolorAreaTitle .floorplanDropDownOptionsDiv").append(b);m!=j&&""!=m&&m==a&&jQuery(".floorplanDropDownItemDiv."+a).addClass("active");l.find(".kolorAreaTitle .floorplanDropDownItemDiv."+a).click(function(b){ktools.DOM.stopEventPropagation(b);A.a(["",a,""])})}function M(){var a=c.background_alpha,d=ktools.Color.hex2rgb(c.background_color),
b=ktools.Color.hex2rgb(c.background_darker_color),f=ktools.Color.hex2rgb(c.background_lighter_color);"Explorer"==kolorBrowserDetect.browser&&9>kolorBrowserDetect.version?(d="rgb("+d[0]+","+d[1]+","+d[2]+")",b="rgb("+b[0]+","+b[1]+","+b[2]+")",a="rgb("+f[0]+","+f[1]+","+f[2]+")"):(d="rgba("+d[0]+","+d[1]+","+d[2]+","+a+")",b="rgba("+b[0]+","+b[1]+","+b[2]+","+a+")",a="rgba("+f[0]+","+f[1]+","+f[2]+","+a+")");var f="#"+c.title_color,e=c.title_font,g=c.title_weight,h=c.title_size,i=c.title_decoration,
d="<style type='text/css'>"+(".floorplanSwapBox{ line-height: 28px; max-width: "+jQuery("#"+o).parent().width()+"px; margin: 0px; cursor: pointer; text-align: left; z-index: 1000; position: absolute; }")+('.floorplanDropDownControl{ direction: ltr; overflow: hidden; text-align: left; line-height: inherit; max-height: 28px; position: relative; font-family: "'+e+'", sans-serif; -webkit-user-select: none; font-size: '+h+"px; padding: 1px 6px; border-width: 1px; border-style: solid; border-color: "+a+
"; border-image: initial; -webkit-box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px; box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px; color: "+f+"; font-weight: "+g+"; text-decoration: "+i+"; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: "+d+"; background-position: initial initial; background-repeat: initial initial; z-index: 2; }")+".floorplanDropDownArrow{ -webkit-user-select: none; border-width: 0px; border-style: initial; border-color: initial; border-image: initial; padding: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; margin-top: -2px; position: absolute; right: 6px; top: 50%; width: 7px; height: 4px; }"+
(".floorplanDropDownOptionsDiv{ background-color: "+d+"; z-index: 1; padding-top: 2px; border-right-width: 1px; border-bottom-width: 0px; border-left-width: 1px; border-top-width: 0px; border-right-style: solid; border-left-style: solid; border-top-style: initial; border-right-color: "+a+"; border-left-color: "+a+"; border-top-color: initial; border-image: initial; -webkit-box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px; box-shadow: rgba(0, 0, 0, 0.398438) 0px 2px 4px; position: relative; text-align: left; display: none; }")+
('.floorplanDropDownItemDiv{ -webkit-user-select: none; font-family: "'+e+'", sans-serif; font-size: '+h+"px; font-weight: "+g+"; text-decoration: "+i+"; padding-top: 2px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; background-color: "+d+"; color: "+f+"; text-transform:capitalize; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: "+a+"; }")+(".floorplanDropDownItemDiv:hover, .floorplanDropDownItemDiv.active{ background-color: "+b+"; }")+(".floorplanDropDownControl:hover{ background: -webkit-linear-gradient(top,"+
d+",rgb(230,230,230)); }")+"</style>";kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(d=toStaticHTML(d));jQuery(d).appendTo("head");d="";d=c.display_title&&""!=c.title?c.use_i18n?ktools.I18N.getInstance().getMessage(c.title):c.title:c.use_i18n?ktools.I18N.getInstance().getMessage(c.fp_selector_label):c.fp_selector_label;d='<\!-- KolorFloorPlan SWAP BOX --\><div class="floorplanSwapBox"><div class="floorplanDropDownControl" id="fpControl">'+d+'<img class="floorplanDropDownArrow" src="'+t+
'floorplan-arrow-down.png" /></div><div class="floorplanDropDownOptionsDiv" id="floorplanDropDownOptionsDiv"></div></div>';l.find(".kolorAreaTitle").css("overflow","visible");kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(d=toStaticHTML(d));l.find(".kolorAreaTitle").html(d);l.find(".kolorAreaTitle .floorplanDropDownControl").click(function(a){ktools.DOM.stopEventPropagation(a);document.getElementById("floorplanDropDownOptionsDiv").style.display=="block"?document.getElementById("floorplanDropDownOptionsDiv").style.display=
"none":document.getElementById("floorplanDropDownOptionsDiv").style.display="block"})}var c={text_color:"000000",text_bkg:"",text_bkg_alpha:0,text_font:"Arial, Helvetica, sans-serif",text_size:"12",text_weight:"normal",text_decoration:"normal",background_color:"f2f2f2",background_alpha:0.8,background_lighter_color:"ffffff",background_darker_color:"cacaca",resize:k,fp_selector:"multiple",fp_selector_label:"Menu",display_title:k,title:"",title_color:"000000",title_font:"Verdana, Geneva, sans-serif",
title_size:"14",title_weight:"bold",title_decoration:"normal",display_orientation:k,display_radar:k,selected_effect:j,radar_radius:50,radar_line_width:1,radar_line_color:"ffffff",radar_line_alpha:0.5,radar_fill_color:"ffffff",radar_fill_alpha:0.3,close_on_click:k,use_i18n:k,zorder:0,device:"desktop",scale_offsets:!0,scale:1,position:"top"},l=jQuery("#"+o).parent().parent(),g=j,F=k,G=k,h=j,i=j,m=j,y=j,x=j,r=j,A=this,H=k,n={},t="",u=[],q="",I=k;this.setKrpanoEngine=this.o=function(a){r=a};this.setReady=
this.p=function(a){F=a};this.isReady=this.isReady=function(){return F};this.setGraphicsUrl=this.i=function(a){t=a};this.setKolorFloorPlanOptions=this.c=function(a){jQuery.extend(c,a)};this.setKolorFloorPlanItems=this.j=function(a){h=a};this.setKolorFloorPlanSpots=this.n=function(a){i=a};this.setKolorFloorPlanSelectedSpot=this.l=function(a){y=a};this.setKolorFloorPlanSelectedSpotOptions=this.m=function(a){x=a};this.setKolorFloorPlanSelectedItem=this.k=function(a){m=a};this.changeLanguage=this.e=function(){if(c.use_i18n){if("multiple"==
c.fp_selector){var a="",a=c.display_title&&""!=c.title?ktools.I18N.getInstance().getMessage(c.title):ktools.I18N.getInstance().getMessage(c.fp_selector_label),a=a+('<img class="floorplanDropDownArrow" src="'+t+'floorplan-arrow-down.png" />');kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(a=toStaticHTML(a));jQuery(".floorplanDropDownControl").html(a);for(key in h)h.hasOwnProperty(key)&&(a=ktools.I18N.getInstance().getMessage(h[key].title),kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&
(a=toStaticHTML(a)),jQuery(".floorplanDropDownItemDiv."+key).html(a))}for(key in i)for(key2 in i[key])a=ktools.I18N.getInstance().getMessage(i[key][key2].desc),"label"==i[key][key2].desctype?(kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(a=toStaticHTML(a)),jQuery("#"+i[key][key2].name+".floorplanSpot p.floorplanSpotLabel").html(a)):jQuery(".floorplanSpot p#"+i[key][key2].name+"_img img").prop("title",a)}};this.showKolorFloorPlan=this.q=function(){debug&&console.log("KolorFloorPlan.showKolorFloorPlan");
if(!G){var a,d=0;for(a in h)h.hasOwnProperty(a)&&d++;1>=d&&(c.fp_selector="one");switch(c.selected_effect){case "bounce":q="bounce 0.35s ease infinite alternate";break;case "pulsate":q="pulsate 0.5s ease infinite alternate";break;default:q=""}I||(c.display_radar&&(c.radar_radius=Math.round(c.radar_radius*c.scale),c.radar_line_width=Math.round(c.radar_line_width*c.scale)),c.display_title&&(c.title_size=Math.round(c.title_size*c.scale)),I=!0);d='<div id="'+p+'"><div class="floorplanContent" style="top: 0px; ';
d=kolorBrowserDetect.isAtLeastIEX(11)&&document.msFullscreenElement!=j?d+("height: "+jQuery("#"+o).parent().get(0).clientHeight+"px; width: "+jQuery("#"+o).parent().get(0).clientWidth+'px;" />'):d+("height: "+jQuery("#"+o).parent().height()+"px; width: "+jQuery("#"+o).parent().width()+'px;" />');d+="</div>";kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(d=toStaticHTML(d));jQuery("#"+o).prepend(d);g=jQuery("#"+p);jQuery("#"+o).parent().css("overflow","hidden");if("multiple"==c.fp_selector)for(a in M(),
h)h.hasOwnProperty(a)&&L(a,h[a].title);for(a in h)if(h.hasOwnProperty(a)&&(h[a].ratio=K(a,h[a].src,h[a].width,h[a].height),c.display_orientation))if("Explorer"==kolorBrowserDetect.browser&&9>kolorBrowserDetect.version)debug&&console.log("KolorFloorPlan.drawCompass not supported on IE8 and previous versions");else{var d=180>=parseFloat(h[a].heading)?-parseFloat(h[a].heading):360-parseFloat(h[a].heading),b=document.getElementById("canvas_compass_"+a).getContext("2d");b.translate(25,25);b.rotate(d*(Math.PI/
180));b.font="bold 14px sans-serif";b.textBaseline="top";b.textAlign="center";b.fillStyle="#"+c.text_color;b.fillText("N",0,-25);b.beginPath();b.moveTo(0,25);b.lineTo(0,-5);b.moveTo(-5,0);b.lineTo(0,-5);b.lineTo(5,0);b.strokeStyle="#"+c.text_color;b.stroke()}c.display_radar&&(n={color:"#"+c.radar_line_color,opacity:c.radar_line_alpha,width:c.radar_line_width,fillColor:"#"+c.radar_fill_color,fillOpacity:c.radar_fill_alpha,radius:c.radar_radius});for(a in i)if(i.hasOwnProperty(a)){var d=a,b=i[a],f=
void 0,e=void 0,l=1,r=1,u=1,l=h[d].ratio,r=h[d].width,u=h[d].height;pHeading=180>=parseFloat(h[d].heading)?-parseFloat(h[d].heading):360-parseFloat(h[d].heading);var t=0,w=0,v=120;for(e in b){if(b[e].anchor)switch(b[e].anchor){case "bottom":t=b[e].height;"label"==b[e].desctype?v>b[e].width?w=v/2:(v=b[e].width,w=b[e].width/2):(w=b[e].width/2,v=b[e].width);break;default:t=b[e].height/2,"label"==b[e].desctype?v>b[e].width?w=v/2:(v=b[e].width,w=b[e].width/2):(w=b[e].width/2,v=b[e].width)}var f="",s=b[e].posy*
u*l,z=b[e].posx*r*l;c.display_radar&&b[e].planar==k&&(f+='<div id="'+b[e].name+'_radar" style="top: '+(s-n.radius)+"px; left: "+(z-n.radius)+'px;" class="floorplanSpotRadar"><canvas height="'+2*n.radius+'" width="'+2*n.radius+'" id="canvas_radar_'+b[e].name+'"><\!-- Your browser does not support the HTML 5 Canvas. --\></canvas></div>');f+='<div id="'+b[e].name+'" class="floorplanSpot" ';f+='style="width: '+v+"px; top: "+(s-t)+"px; left: "+(z-w)+"px;";kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&
(f+="pointer-events: auto;");f+='"><p id="'+b[e].name+'_img" ';"label"!=b[e].desctype&&(f+='class="fptooltips" ');f+='style="height: '+b[e].height+"px;width: "+b[e].width+"px;";"label"==b[e].desctype&&(f+="margin: auto;");kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(f+="pointer-events: auto;");f+='"><img src="'+b[e].icon+'" width="'+b[e].width+'" height="'+b[e].height+'" />';"label"!=b[e].desctype&&(f+='<span class="fptooltips" style="left:calc('+b[e].width/2+"px - 65px);color: #"+c.text_color+
";",""!==c.text_bkg?(s=ktools.Color.hex2rgb(c.text_bkg),z=c.text_bkg_alpha,f+="background-color: rgba("+s[0]+","+s[1]+","+s[2]+","+z+");"):f+="text-shadow: black 0.1em 0.1em 0.2em;",f+="text-decoration: "+c.text_decoration+";font-family: "+c.text_font+";font-weight: "+c.text_weight+";font-size: "+c.text_size+'px;">'+(c.use_i18n?ktools.I18N.getInstance().getMessage(b[e].desc):b[e].desc)+"</span>");f+="</p>";"label"==b[e].desctype&&(f+='<p class="floorplanSpotLabel" style="margin: auto;color: #'+c.text_color+
";text-decoration: "+c.text_decoration+";font-family: "+c.text_font+";font-weight: "+c.text_weight+";font-size: "+c.text_size+"px;",""!==c.text_bkg?(s=ktools.Color.hex2rgb(c.text_bkg),z=c.text_bkg_alpha,f+="background-color: rgba("+s[0]+","+s[1]+","+s[2]+","+z+");"):f+="text-shadow: black 0.1em 0.1em 0.2em;",f+='">'+(c.use_i18n?ktools.I18N.getInstance().getMessage(b[e].desc):b[e].desc)+"</p>");f+="</div>";kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(f=toStaticHTML(f));g.find(".floorplanContent").find(".floorplanItem."+
d).prepend(f);c.selected_effect&&document.getElementById(b[e].name)&&jQuery.data(document.getElementById(b[e].name),"scene",b[e].scene);c.display_radar&&document.getElementById(b[e].name+"_radar")&&jQuery.data(document.getElementById(b[e].name+"_radar"),"scene",b[e].scene);jQuery("#"+b[e].name).data("spotInitTop",b[e].posy*u);jQuery("#"+b[e].name).data("spotInitLeft",b[e].posx*r);jQuery("#"+b[e].name).data("spotInitTopMargin",t);jQuery("#"+b[e].name).data("spotInitLeftMargin",w);c.display_radar&&
("Explorer"==kolorBrowserDetect.browser&&9>kolorBrowserDetect.version?debug&&console.log("KolorFloorPlan.drawSpotRadar not supported on IE8 and previous versions"):E(b[e].name,pHeading+b[e].heading,j))}d=i[a];b=void 0;for(b in d)d[b].jsclick&&J(d[b].name+"_img",d[b].jsclick)}y!=j&&""!=y&&m!=j&&""!=m?x!=j&&x[0]?A.a([y,m,x[0]]):A.a([y,m,""]):m!=j&&""!=m?A.a([j,m,""]):A.d();H===k&&(jQuery(window).bind("resize",C),H=!0);C();G=!0}g.show()};this.hideKolorFloorPlan=this.g=function(){debug&&console.log("KolorFloorPlan.hideKolorFloorPlan");
g.hide()};this.selectSpot=this.a=function(a){if(a&&a[1]){jQuery(".floorplanSpot").removeClass("selected");jQuery(".floorplanSpotLabel").css("font-weight","normal");c.selected_effect&&("Explorer"==kolorBrowserDetect.browser&&10>kolorBrowserDetect.version?debug&&console.log("KolorFloorPlan.selectSpot (CSS animation) not supported on IE9 and previous versions"):(jQuery(".floorplanSpot").css("-moz-animation",""),jQuery(".floorplanSpot").css("-o-animation",""),jQuery(".floorplanSpot").css("-ms-animation",
""),jQuery(".floorplanSpot").css("-webkit-animation",""),jQuery(".floorplanSpot").css("animation",""),jQuery(".floorplanSpotRadar").css("-moz-animation",""),jQuery(".floorplanSpotRadar").css("-o-animation",""),jQuery(".floorplanSpotRadar").css("-ms-animation",""),jQuery(".floorplanSpotRadar").css("-webkit-animation",""),jQuery(".floorplanSpotRadar").css("animation","")));if(c.display_radar&&(jQuery(".floorplanSpotRadar").css("display","none"),a[2]||""==a[2])){""==a[2]&&u&&3==u.length&&(a[2]=u[2]);
u=a;if(c.selected_effect)if("Explorer"==kolorBrowserDetect.browser&&10>kolorBrowserDetect.version)debug&&console.log("KolorFloorPlan.selectSpot (CSS animation) not supported on IE9 and previous versions");else for(var d=j,d="Explorer"==kolorBrowserDetect.browser&&9>kolorBrowserDetect.version?document.querySelector(".floorplanSpot"):document.getElementsByClassName("floorplanSpot"),b=0;b<d.length;b++)jQuery.data(d[b],"scene")==a[2]&&(document.getElementById(d[b].id).style.mozAnimation=document.getElementById(d[b].id).style.oAnimation=
document.getElementById(d[b].id).style.msAnimation=document.getElementById(d[b].id).style.webkitAnimation=document.getElementById(d[b].id).style.animation=q);d=j;d="Explorer"==kolorBrowserDetect.browser&&9>kolorBrowserDetect.version?document.querySelector(".floorplanSpotRadar"):document.getElementsByClassName("floorplanSpotRadar");for(b=0;b<d.length;b++)jQuery.data(d[b],"scene")==a[2]&&(document.getElementById(d[b].id).style.display="block",c.selected_effect&&"bounce"==c.selected_effect&&("Explorer"==
kolorBrowserDetect.browser&&10>kolorBrowserDetect.version?debug&&console.log("KolorFloorPlan.selectSpot (CSS animation) not supported on IE9 and previous versions"):document.getElementById(d[b].id).style.mozAnimation=document.getElementById(d[b].id).style.oAnimation=document.getElementById(d[b].id).style.msAnimation=document.getElementById(d[b].id).style.webkitAnimation=document.getElementById(d[b].id).style.animation=q))}"multiple"==c.fp_selector&&l.find(".kolorAreaTitle .floorplanDropDownItemDiv.active").removeClass("active");
g.find(".floorplanItem").css("display","none");g.find(".floorplanItem."+a[1]).css("display","block");c.display_title&&("multiple"==c.fp_selector?r.call(p+"ChangeTitle('"+h[a[1]].title+"')"):""!=c.title&&r.call("changeTitleKolorArea_"+p+"Area('"+h[a[1]].title+"')"));c.display_orientation&&(g.find(".floorplanCompass").css("display","none"),g.find(".floorplanCompass."+a[1]).css("display","block"));m=a[1];"multiple"==c.fp_selector&&(l.find(".kolorAreaTitle .floorplanDropDownItemDiv."+a[1]).addClass("active"),
document.getElementById("floorplanDropDownOptionsDiv").style.display="none");if(a[0]&&""!=a[0]){jQuery("#"+a[0]).find(".floorplanSpot").removeClass("selected");jQuery("#"+a[0]).find(".floorplanSpotLabel").css("font-weight","bold");c.display_radar&&jQuery("#"+a[0]+"_radar").css("display","block");c.selected_effect&&("Explorer"==kolorBrowserDetect.browser&&10>kolorBrowserDetect.version?debug&&console.log("KolorFloorPlan.selectSpot (CSS animation) not supported on IE9 and previous versions"):(jQuery("#"+
a[0]).css("-moz-animation",q),jQuery("#"+a[0]).css("-o-animation",q),jQuery("#"+a[0]).css("-ms-animation",q),jQuery("#"+a[0]).css("-webkit-animation",q),jQuery("#"+a[0]).css("animation",q)));x!=j&&(c.display_radar&&a[2]&&x[0]==a[2]&&this.b(x),x=j);if(!c.resize){var b=jQuery("#"+a[0]).position().top,d=jQuery("#"+a[0]).position().left,f=jQuery("#"+a[0]).height(),e=jQuery("#"+a[0]).width(),i=g.find(".floorplanContent").width(),b=g.find(".floorplanContent").height()/2-b-f/2,d=i/2-d-e/2,e=jQuery(".floorplanItem."+
a[1]).data("containerLeft"),i=jQuery(".floorplanItem."+a[1]).data("containerTop");0<b?b=0:b<i&&(b=i);0<d?d=0:d<e&&(d=e);g.find(".floorplanItem."+a[1]).css("top",b+"px");g.find(".floorplanItem."+a[1]).css("left",d+"px")}y=a[0]}}};this.unselectSpot=this.d=function(){jQuery(".floorplanSpot").removeClass("selected");jQuery(".floorplanSpotLabel").css("font-weight","normal");c.display_radar&&jQuery(".floorplanSpotRadar").css("display","none");y=j;u=[]};this.changeDirection=this.b=function(a){if(c.display_radar)if("Explorer"==
kolorBrowserDetect.browser&&9>kolorBrowserDetect.version)debug&&console.log("KolorFloorPlan.drawSpotRadar not supported on IE8 and previous versions");else if(a&&3==a.length){var d,b;for(d in i)if(i.hasOwnProperty(d))for(b in i[d])a[0]==i[d][b].scene&&(E(i[d][b].name,parseFloat(i[d][b].heading)+(180>=parseFloat(h[d].heading)?-parseFloat(h[d].heading):360-parseFloat(h[d].heading))+parseFloat(a[1])%360,parseFloat(a[2])),jQuery("#"+i[d][b].name+"_radar").css("display","block"))}};this.changeTitle=this.f=
function(a){""!=c.title||"undefined"!=typeof a[0]&&""!=a[0]?(this.c({title:a[0]}),a=(c.use_i18n?ktools.I18N.getInstance().getMessage(c.title):c.title)+'<img class="floorplanDropDownArrow" src="'+t+'floorplan-arrow-down.png" />',kolorBrowserDetect.isIE()&&!kolorBrowserDetect.isEdge()&&(a=toStaticHTML(a)),l.find(".kolorAreaTitle .floorplanDropDownControl").html(a)):l.find(".kolorAreaTitle .floorplanDropDownControl").html("")};this.hideRadar=this.h=function(){c.display_radar&&jQuery(".floorplanSpotRadar").css("display",
"none")}};})();